{% extends 'marketplace/base.html' %}

{% block title %}My Account - Patch!{% endblock %}

{% block content %}
<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="mb-8">
        <h1 class="text-3xl font-semibold mb-2" style="color: var(--primary-green);">
            Hi, {{ user.username }}!
        </h1>
        <p style="color: var(--dark-gray);">Manage your items and account</p>
    </div>

    <!-- æ ‡ç­¾é¡µ -->
    <div class="border-b mb-8" style="border-color: var(--light-gray);">
        <nav class="flex space-x-8">
            <a href="#" class="pb-4 border-b-2 font-medium" style="border-color: var(--primary-orange); color: var(--primary-orange);">
                My Items
            </a>
            <a href="#" class="pb-4 font-medium hover:opacity-70" style="color: var(--dark-gray);">
                Favorites
            </a>
            <a href="#" class="pb-4 font-medium hover:opacity-70" style="color: var(--dark-gray);">
                Settings
            </a>
        </nav>
    </div>

    <!-- æ“ä½œæŒ‰é’® -->
    <div class="mb-8">
        <a href="{% url 'marketplace:post_item' %}" class="inline-block px-6 py-3 rounded-full font-medium btn-primary">
            + Post New Item
        </a>
    </div>

    <!-- æˆ‘çš„å•†å“åˆ—è¡¨ -->
    {% if my_items %}
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {% for item in my_items %}
        <div class="group">
            <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden mb-3 relative">
                {% if item.images.first %}
                    <img src="{{ item.images.first.image.url }}" alt="{{ item.name }}" class="w-full h-full object-cover">
                {% else %}
                    <div class="w-full h-full flex items-center justify-center" style="background-color: var(--light-gray);">
                        <span class="text-4xl">ðŸŽ¨</span>
                    </div>
                {% endif %}
                <div class="absolute top-2 right-2">
                    <span class="px-3 py-1 rounded-full text-xs font-medium tag">Active</span>
                </div>
            </div>
            <div>
                <h3 class="font-medium mb-1 truncate" style="color: var(--text-black);">{{ item.name }}</h3>
                <p class="text-lg font-semibold mb-2" style="color: var(--primary-orange);">${{ item.price }}</p>
                <div class="flex gap-2">
                    <a href="{% url 'marketplace:edit_item' item.id %}" class="text-sm px-3 py-1 rounded border hover:bg-gray-50 inline-block text-center" style="border-color: var(--light-gray); color: var(--dark-gray);">
                        Edit
                    </a>
                    <a href="{% url 'marketplace:delete_item' item.id %}" class="text-sm px-3 py-1 rounded hover:bg-red-50 inline-block text-center" style="color: #ef4444;">
                        Delete
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-20">
        <div class="mb-4">
            <span class="text-6xl">ðŸ“¦</span>
        </div>
        <h2 class="text-2xl font-semibold mb-2" style="color: var(--primary-green);">No items yet</h2>
        <p class="mb-6" style="color: var(--dark-gray);">Start by posting your first item!</p>
        <a href="{% url 'marketplace:post_item' %}" class="inline-block px-6 py-3 rounded-full font-medium btn-primary">
            Post Your First Item
        </a>
    </div>
    {% endif %}
</section>
{% endblock %}